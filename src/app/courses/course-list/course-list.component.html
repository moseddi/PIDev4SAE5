<!-- Notification Banner -->
<div class="notification" *ngIf="notification" [ngClass]="notification.type">
  {{ notification.message }}
</div>

<div class="courses-container">
  <!-- Lesson List Section (Inline) -->
  <div class="lesson-section" *ngIf="showLessons">
    <app-lesson-list
      [courseId]="viewingCourseId"
      [showBackLink]="false"
      (backToCourses)="hideLessons()">
    </app-lesson-list>
  </div>

  <!-- Course Form Section (Inline) -->
  <div class="form-section" *ngIf="showForm && !showLessons">
    <app-course-form
      [isEditMode]="isEditMode"
      [courseId]="editingCourseId"
      [hideCancelButton]="true"
      (courseSaved)="onCourseSaved()"
      (cancelForm)="hideForm()">
    </app-course-form>
  </div>

  <!-- Course List Section -->
  <div class="courses-section" *ngIf="!showForm && !showLessons">
    <div class="courses-header">
      <h2>Our English Courses</h2>
      <button class="btn-add" (click)="showNewCourseForm()">+ New Course</button>
    </div>

    <!-- Search and Filter Bar -->
    <div class="search-filter-bar">
      <div class="search-input-container">
        <input 
          type="text" 
          [(ngModel)]="searchText" 
          placeholder="Search courses or lessons..." 
          class="search-input"
        />
        <span class="search-icon">ğŸ”</span>
      </div>
      <div class="filter-select-container">
        <select 
          [(ngModel)]="selectedLevel" 
          class="filter-select"
        >
          <option value="">All Levels</option>
          <option *ngFor="let level of availableLevels" [value]="level">{{ level }}</option>
        </select>
      </div>
      <button 
        *ngIf="searchText || selectedLevel" 
        (click)="clearFilters()" 
        class="btn-clear"
      >
        Clear Filters
      </button>
    </div>

    <!-- Results count -->
    <div class="results-count" *ngIf="searchText || selectedLevel">
      Showing {{ filteredCourses.length }} of {{ courses.length }} courses
    </div>

  <!-- Loading State -->
  <div class="loading-spinner" *ngIf="loading">
    <p>Loading courses...</p>
  </div>

  <!-- Empty State -->
  <div class="empty-state" *ngIf="!loading && filteredCourses.length === 0 && courses.length > 0">
    <p>No courses match your search or filter criteria.</p>
    <button class="btn-add" (click)="clearFilters()">Clear Filters</button>
  </div>

  <!-- Empty State (no courses at all) -->
  <div class="empty-state" *ngIf="!loading && courses.length === 0">
    <p>No courses found. Create your first course!</p>
    <button class="btn-add" (click)="showNewCourseForm()">+ New Course</button>
  </div>

  <!-- Course Grid -->
  <div class="courses-grid" *ngIf="!loading && filteredCourses.length > 0">
    <div class="course-card" *ngFor="let course of filteredCourses">
      <span class="course-level">{{ course.level }}</span>
      <h3>{{ course.title }}</h3>
      <p class="course-description">{{ course.description }}</p>
      <div class="course-footer">
        <span class="course-duration">{{ course.duration }} hours</span>
      </div>
      <div class="course-actions">
        <button (click)="showCourseLessons(course)" class="btn-small btn-view">View Lessons</button>
        <button (click)="showEditCourseForm(course)" class="btn-small btn-edit">Edit</button>
        <button (click)="deleteCourse(course)" class="btn-small btn-delete">Delete</button>
      </div>
    </div>
  </div>
</div>
